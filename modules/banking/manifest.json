{
  "name": "banking",
  "displayName": "Banking",
  "version": "1.0.0",
  "description": "Bank account management, transaction import, and reconciliation",
  "author": "Archimedes",
  "license": "MIT",
  "category": "Accounting",
  "depends": ["core", "contacts"],
  
  "autoload": {
    "psr-4": {
      "Modules\\Banking\\": "src/"
    }
  },
  
  "providers": [
    "Modules\\Banking\\BankingServiceProvider"
  ],
  
  "migrations": "database/migrations",
  
  "routes": {
    "api": "src/routes.php"
  },
  
  "models": {
    "BankAccount": {
      "class": "Modules\\Banking\\Models\\BankAccount",
      "table": "bank_accounts",
      "extends": "ExtendableModel"
    },
    "BankStatement": {
      "class": "Modules\\Banking\\Models\\BankStatement",
      "table": "bank_statements",
      "extends": "ExtendableModel"
    },
    "BankStatementLine": {
      "class": "Modules\\Banking\\Models\\BankStatementLine",
      "table": "bank_statement_lines",
      "extends": "ExtendableModel"
    },
    "BankConnection": {
      "class": "Modules\\Banking\\Models\\BankConnection",
      "table": "bank_connections",
      "extends": "ExtendableModel"
    }
  },
  
  "frontend": {
    "pages": {
      "/banking": "pages/banking.tsx"
    },
    "extensionPoints": {
      "banking.list.filters": { "type": "filters" },
      "banking.list.columns": { "type": "columns" },
      "banking.form.sidebar": { "type": "sidebar" },
      "banking.detail.header": { "type": "header" },
      "banking.detail.tabs": { "type": "tabs" },
      "banking.reconciliation.actions": { "type": "actions" }
    },
    "navigation": {
      "main": [
        {
          "label": "Banking",
          "icon": "Landmark",
          "path": "/banking",
          "permission": "banking.view"
        }
      ]
    }
  },
  
  "permissions": {
    "groups": [
      {
        "id": "banking.group_readonly",
        "name": "Banking Readonly",
        "description": "Can view bank accounts and statements",
        "implied": ["base.group_user"]
      },
      {
        "id": "banking.group_user",
        "name": "Banking User",
        "description": "Can manage statements and reconcile",
        "implied": ["banking.group_readonly"]
      },
      {
        "id": "banking.group_manager",
        "name": "Banking Manager",
        "description": "Full banking access including connections",
        "implied": ["banking.group_user"]
      }
    ],
    "access": {
      "banking.bankstatement": {
        "banking.group_readonly": [true, false, false, false],
        "banking.group_user": [true, true, true, false],
        "banking.group_manager": [true, true, true, true]
      },
      "banking.bankaccount": {
        "banking.group_readonly": [true, false, false, false],
        "banking.group_user": [true, true, false, false],
        "banking.group_manager": [true, true, true, true]
      }
    },
    "rules": [
      {
        "id": "rule_banking_company",
        "name": "Banking by company",
        "model": "banking.bankstatement",
        "domain": "user.company_ids.includes(record.company_id)",
        "global": true
      }
    ]
  },
  
  "icon": "landmark",
  "color": "#10B981"
}
